# 5) 저장 및 출력 지침

## A. 적용 범위
- 외장 저장 장치(예: `/Volumes/*`)에서 분석·시각화 작업을 수행할 때 적용한다.
- 소스 코드 작성, 데이터 전처리, 그림/표 산출 등 저장 행위 전반을 포함한다.

## B. 외장 저장소 작업 규칙
1. **소스 코드와 산출물 동시 저장**: 외장하드 경로에서 작업하는 동안 생성·수정한 파이썬 스크립트, 노트북, 모듈을 포함한 모든 소스 코드는 외장하드 내 적절한 디렉터리에 저장한다. **그림을 생성하는 스크립트는 해당 그림이 저장되는 디렉터리(예: `Figure/`)와 동일 경로(또는 그 하위 `scripts/`)에 반드시 함께 둔다.** 계산 전용 모듈은 `Decadal/source/` 등 전용 소스 디렉터리에 보관한다.
2. **결과물 현지 보관**: 분석 결과(그림, 테이블, 로그 등)도 동일 외장 경로에 보관하고, 다른 위치로 임시 복사했을 경우 즉시 외장 경로로 동기화한다. 별도 지시가 없는 한 그림 산출물은 PNG로 저장하고, 필요 시 추가 포맷(PDF 등)을 병행한다.
3. **경로 명시**: 스크립트 내 기본 출력 경로나 `--output` 옵션 기본값을 설정할 때 외장 경로가 기본이 되도록 한다.
4. **로컬 라이브러리 활용 방식**: 루트 리포(`~/Desktop/GPT/Mixed-Layer-Heat-budget`)에 있는 소스 파일은 참고용으로만 유지하고, 실제 실행·출력은 가능하면 외장하드 경로에서 수행한다. 로컬 복사본을 수정할 경우 외장 버전도 동일하게 반영했는지 확인한다.
5. **동기화 검증**: 외장 경로 외 다른 위치에 중간 산출물이 생성되었는지 정기적으로 확인하고, 발견 즉시 외장 경로로 이동·정리한다.

## C. 소스 코드 라이브러리 구조화
1. **루트 내 라이브러리 배치**: 새로 작성하는 모든 소스 코드는 루트(`~/Desktop/GPT/Mixed-Layer-Heat-budget`)의 `src/` 하위에 위치한 라이브러리 구조로 편입한다. 외장하드 작업 시에도 계산 로직은 `Decadal/source/` 등 전용 디렉터리에, 그림 생성 스크립트는 대응하는 `Figure/` 하위에 두어 두 위치가 역할별로 분리되도록 한다.
2. **성격별 모듈화**: 기능에 따라 모듈을 분리한다.
   - 데이터 다운로드·전처리는 `src/io/`, `src/preprocess/` 등 입·출력 관련 하위 모듈로 정리한다.
   - 분석·통계 계산은 `src/analysis/` 또는 세부 도메인별 폴더를 사용한다.
   - 시각화·보고용 코드는 `src/visualization/` 하위에 배치하고, 공통 스타일/유틸은 `src/visualization/utils.py` 등으로 재사용성을 확보한다.
3. **외장 라이브러리 미러링**: 외장 경로에 코드를 둘 때도 동일한 패키지 구조를 유지해 import 경로 혼선을 방지하고, 필요 시 `PYTHONPATH`를 외장 경로의 `src` 루트를 가리키도록 설정한다.
4. **문서화**: 새 모듈을 만들면 `docs/README` 또는 관련 가이드라인에 간단한 사용법과 저장 위치를 기록해 팀이 공유할 수 있도록 한다.

## D. 점검 체크리스트
- [ ] 외장 경로에 소스 코드와 결과물이 모두 있는지 확인했다.
- [ ] 코드가 루트 `src/` 구조에 맞춰 분류·저장되어 있다.
- [ ] 출력 경로 기본값이 외장 경로를 가리키는지 검토했다.
- [ ] 변경 사항을 관련 문서/일지에 반영했다.
